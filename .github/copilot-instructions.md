<!-- .github/copilot-instructions.md -->

# Copilot instructions for FatCat (Godot 4.4, GDScript)

This file gives concise, actionable guidance to AI coding agents working in this repository so they can be productive immediately. Keep changes small and local; prefer touching scenes and small scripts rather than sweeping refactors.

Key points (short):
- Engine: Godot 4.4 (see `project.godot` -> `config/features`)
- Language: GDScript (Godot's scripting language). Scene-first architecture: logic is attached to scenes (.tscn) and scripts (.gd).
- Autoloads: `addons/dialogue_manager/dialogue_manager.gd` is registered as an autoload named `DialogueManager` (see `project.godot`). Use it for dialogue-related interactions.

Architecture and patterns to follow
- Scene-first design: gameplay actors are scenes (PackedScene). Example: `Scences/fat_cat.tscn`, `Scences/enemy.tscn`.
- Instantiation pattern: scenes are exported as `PackedScene` and instantiated in code, e.g. in `Scripts/spawner.gd`:
  - Export a property: `@export var enemy_scene: PackedScene`
  - Instantiate: `var enemy = enemy_scene.instantiate()` then set `enemy.position` and `get_parent().add_child(enemy)`.
- Movement and physics: use Godot 4 classes (CharacterBody2D) and `move_and_slide()` as used in `Scripts/player.gd`.
- UI navigation: change scenes using `get_tree().change_scene_to_file(...)` as seen in `Scripts/main_menu.gd`.

Conventions observed (follow these)
- Node paths in scenes are used to link players and enemies (see `Scences/Game.tscn` where enemy instances have `player_path = NodePath("../FatCat")`). Use relative NodePath where possible.
- Small scripts per-scene. Keep single responsibility: one script controlling one scene or UI element.
- Exported variables are used for authoring in the editor (`@export` / `export`). Prefer typed exports where practical: `@export var enemy_scene: PackedScene`.
- Signals: project uses Godot's signal/timer callbacks (e.g. `_on_timer_timeout()` in `Scripts/spawner.gd`). Keep function names matching signal connections in the scene (no automatic rename).

Developer workflows (what an agent should assume)
- Running / testing: Open the project in Godot 4.4 editor and run the main scene (configured in `project.godot` -> `run/main_scene`). If automating, invoke Godot editor or headless export tools locally; do not modify engine version unless necessary.
- Editing scenes: prefer using the Godot editor for scene/node connections (signals, exported Resource links). If editing .tscn manually, be conservative — only change small, targeted sections.
- Debugging: inspect the scene tree and connected signals in the editor. Use `print()` or `push_error()` in GDScript for quick runtime logs. Avoid adding heavy debug frameworks.

Integration points and important files
- `project.godot` — engine version, autoloads, input map.
- `addons/dialogue_manager/` — dialogue plugin and `dialogue_manager.gd` autoload. Use this for dialogue data (see `dialogue/` folder for `.dialogue` resources).
- `Scences/` — scene instances (Game, fat_cat, enemies). Look for `player_path` and other exported NodePath values.
- `Scripts/` — gameplay scripts (e.g., `player.gd`, `spawner.gd`, `main_menu.gd`, enemy scripts). Use these to learn coding style and hooks.
- `Design/` and `character/` — art and sprite sheets; asset imports contain `.import` sidecars. Don't remove `.import` files.

Examples to copy (explicit snippets)
- Instancing a PackedScene (copy from `Scripts/spawner.gd`):
  @export var enemy_scene: PackedScene

  func _on_timer_timeout() -> void:
      var enemy = enemy_scene.instantiate()
      enemy.position = position
      get_parent().add_child(enemy)

- Player movement pattern (from `Scripts/player.gd`):
  var direction = Input.get_vector("left", "right", "up", "down")
  velocity = direction * 500
  move_and_slide()

What to avoid / project-specific gotchas
- Do not rewire autoload names or editor plugin entries in `project.godot` unless you update the editor plugin files under `addons/dialogue_manager/`.
- Avoid large refactors of scene files (`.tscn`) by hand. Many connections (signals, exported Resource links) are easier to break than fix.
- Asset `.import` files are generated by the engine; don't delete them manually.

If you need to make code changes
- Prefer small, testable edits: change a single script and run the scene in the editor.
- When adding exported resources (PackedScene, NodePath), match the project's pattern and default to editor-assignable exports so designers can hook scenes.

Files to open first when onboarding
1. `project.godot` — to confirm engine and autoloads
2. `Scences/Game.tscn` — how the game scene wires players/enemies
3. `Scripts/player.gd` and `Scripts/spawner.gd` — canonical gameplay patterns
4. `addons/dialogue_manager/dialogue_manager.gd` — autoload behaviour

If something's unclear
- Ask for which scene to run, or for a short video/screenshot of the expected behavior. The Godot editor state (scene connections) is not fully reconstructible from raw files alone.

---
Please review this file for missing specifics you'd like the agent to know (for example: preferred test scene to run, custom export templates, or platform-specific run commands). I'll iterate on feedback.
